<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Ding IoC/AoP/DI PHP Framework</title><link rel="stylesheet" href="css/jquery-ui.css" type="text/css"></link><link rel="stylesheet" href="css/docblox/jquery-ui-1.8.16.custom.css" type="text/css"></link><link rel="stylesheet" href="css/jquery.treeview.css" type="text/css"></link><link rel="stylesheet" href="css/theme.css" type="text/css"></link><script type="text/javascript" src="js/jquery-1.4.2.min.js"></script><script type="text/javascript" src="js/jquery-ui-1.8.2.custom.min.js"></script><script type="text/javascript" src="js/jquery.tools.min.js"></script><script type="text/javascript" src="js/jquery.cookie.js"></script><script type="text/javascript" src="js/jquery.treeview.js"></script><script type="text/javascript">
            $(document).ready(function() {
                $(".filetree").treeview({
                    collapsed: true,
                    persist: "cookie"
                });

                $("#accordion").accordion({
                    collapsible: true,
                    autoHeight:  false,
                    fillSpace:   true
                });

                $(".tabs").tabs();
            });
        </script></head><body><div xmlns="" id="content">
<script xmlns:dbx="http://docblox-project.org/xsl/functions">

      function filterElements()
      {
        inherited = !$('#show-inherited').hasClass('deselected');
        public    = !$('#show-public').hasClass('deselected');
        protected = !$('#show-protected').hasClass('deselected');
        private   = !$('#show-private').hasClass('deselected');

        $('div.public').each(function(index, val) {
            $(val).toggle(public && !($(val).hasClass('inherited_from') && !inherited));
        });
        $('div.protected').each(function(index, val) {
            $(val).toggle(protected && !($(val).hasClass('inherited_from') && !inherited));
        });
        $('div.private').each(function(index, val) {
            $(val).toggle(private && !($(val).hasClass('inherited_from') && !inherited));
        });
      }

      $(document).ready(function() {
        $('a.gripper').click(function() {
            $(this).nextAll('div.code-tabs').slideToggle();
            $(this).children('img').toggle();
            return false;
        });

        $('div.method code span.highlight,div.function code span.highlight,div.constant code span.highlight,div.property code span.highlight').css('cursor', 'pointer');

        $('div.method code span.highlight,div.function code span.highlight,div.constant code span.highlight,div.property code span.highlight').click(function() {
            $(this).parent().nextAll('div.code-tabs').slideToggle();
            $(this).parent().prevAll('a.gripper').children('img').toggle();
            return false;
        });

        $('div.code-tabs').hide();
        $('a.gripper').show();
        $('div.code-tabs:empty').prevAll('a.gripper').html('');

        $('#show-public, #show-protected, #show-private, #show-inherited')
            .css('cursor', 'pointer')
            .click(function(){
                $(this).toggleClass('deselected');
                if ($(this).hasClass('deselected')) {
                  $(this).fadeTo('fast', '0.4');
                } else {
                  $(this).fadeTo('fast', '1.0');
                }
                filterElements();
                return false;
            });
        $('#show-protected, #show-private').click();

        // add the sliding behaviour to the file navigation and show it
        // it is initially hidden for non-JS users.
        $("#file-nav-box").show().hover(function() {
            $("#file-nav-container").slideDown(400);
        }, function() {
            $("#file-nav-container").slideUp(400);
        });
      });

      
    </script><h1 xmlns:dbx="http://docblox-project.org/xsl/functions" class="file">Aspect/Proxy.php<a href="source/Aspect/Proxy.php.html"><img src="images/icons/view_source.png" border="0"></a>
</h1>
<div xmlns:dbx="http://docblox-project.org/xsl/functions" id="file-nav-box">
<div id="file-nav-options">
              Show:
              <img src="images/icons/visibility_public.png" id="show-public"><img src="images/icons/visibility_protected.png" id="show-protected"><img src="images/icons/visibility_private.png" id="show-private"><span class="attribute" id="show-inherited">inherited</span>
</div>
<div id="file-nav-container">
<ul id="file-nav"><li>
<a href="#classes"><img src="images/icons/class.png" height="14">
                          Classes
                      </a><ul><li><a href="#%5CDing%5CAspect%5CProxy">\Ding\Aspect\Proxy</a></li></ul>
</li></ul>
<div style="clear: left;"></div>
</div>
<div id="file-nav-tab">
              Table of Contents
          </div>
</div>
<a xmlns:dbx="http://docblox-project.org/xsl/functions" name="top" class="anchor"></a><div id="file-description">
<p xmlns:dbx="http://docblox-project.org/xsl/functions" class="short-description">So... php does not have such a thing.. and here's what it needs to be done
to have a proxy class and any kind of "dynamic class".</p>
<div xmlns:dbx="http://docblox-project.org/xsl/functions" class="long-description"><p>PHP Version 5</p></div>
</div>
<dl class="file-info">
<dt xmlns:dbx="http://docblox-project.org/xsl/functions">Author</dt>
<dd xmlns:dbx="http://docblox-project.org/xsl/functions">
<a href="mailto:marcelog@gmail.com">Marcelo Gornstein</a>
         
    </dd>
<dt xmlns:dbx="http://docblox-project.org/xsl/functions">Category</dt>
<dd xmlns:dbx="http://docblox-project.org/xsl/functions">Ding
         
    </dd>
<dt xmlns:dbx="http://docblox-project.org/xsl/functions">License</dt>
<dd xmlns:dbx="http://docblox-project.org/xsl/functions">
<a href="http://marcelog.github.com/">Apache License 2.0</a>
         
    </dd>
<dt xmlns:dbx="http://docblox-project.org/xsl/functions">Link</dt>
<dd xmlns:dbx="http://docblox-project.org/xsl/functions">
<a href="http://marcelog.github.com/%0ACopyright">2011 Marcelo Gornstein <marcelog@gmail.com>
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</a>
         
    </dd>
<dt xmlns:dbx="http://docblox-project.org/xsl/functions">Package</dt>
<dd xmlns:dbx="http://docblox-project.org/xsl/functions">Aspect
         
    </dd>
</dl>
<a name="classes" class="anchor"></a><a xmlns:dbx="http://docblox-project.org/xsl/functions" id="\Ding\Aspect\Proxy" class="anchor"></a><h2 xmlns:dbx="http://docblox-project.org/xsl/functions" class="class">\Ding\Aspect\Proxy<div class="to-top"><a href="#top">jump to top</a></div>
</h2>
<div xmlns:dbx="http://docblox-project.org/xsl/functions" class="class">
<small class="package"><b>Package: </b>Aspect</small><p class="short-description">So... php does not have such a thing.. and here's what it needs to be done
to have a proxy class and any kind of "dynamic class".</p>
<div class="long-description"><p>PHP Version 5</p></div>
<dl class="class-info">
<dt>Implements</dt>
<dd><a href="db_Reflection_IReflectionFactoryAware.html#%5CDing%5CReflection%5CIReflectionFactoryAware">\Ding\Reflection\IReflectionFactoryAware</a></dd>
<dt>Author</dt>
<dd>
<a href="mailto:marcelog@gmail.com">Marcelo Gornstein</a>
         
    </dd>
<dt>Category</dt>
<dd>Ding
         
    </dd>
<dt>License</dt>
<dd>
<a href="http://marcelog.github.com/">Apache License 2.0</a>
         
    </dd>
<dt>Link</dt>
<dd>
<a href="http://marcelog.github.com/">http://marcelog.github.com/</a>
         
    </dd>
<dt>Todo</dt>
<dd>Performance: Remove new MethodInvocation in proxied invocation.
         
    </dd>
</dl>
<h3>Properties</h3>
<div>
<a id="\Ding\Aspect\Proxy::$cache" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/property.png" alt="Property"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">\Ding\Cache\ICache
                 <span class="highlight">$cache</span>= 'false'
                </code><div class="description">
<p class="short-description">Proxy cache implementation.</p></div>
<div class="code-tabs">
<div class="long-description"></div>
<strong>Default value</strong><code>false</code><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd><a href="db_Cache_ICache.html#%5CDing%5CCache%5CICache">\Ding\Cache\ICache</a></dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\Ding\Aspect\Proxy::$methodTemplate" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/property.png" alt="Property"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">string
                 <span class="highlight">$methodTemplate</span>= '&lt;&lt;&lt;TEXT
    VISIBILITY ADDITIONAL function METHOD_NAME(METHOD_ARGS)
    {
        \$invocation = new MethodInvocation(
            'CLASS_NAME', 'METHOD_NAME', func_get_args(), \$this,
            self::\$_reflectionFactory
        );
        try
        {
        	return self::\$_dispatcher-&gt;invoke(\$invocation);
        } catch (Exception \$exception) {
            \$invocation-&gt;setException(\$exception);
        	return self::\$_dispatcher-&gt;invokeException(\$invocation);
        }
	}
TEXT'
                </code><div class="description">
<p class="short-description">Method template (i.e: effetively, the proxy methods).</p></div>
<div class="code-tabs">
<div class="long-description"></div>
<strong>Default value</strong><code>&lt;&lt;&lt;TEXT
    VISIBILITY ADDITIONAL function METHOD_NAME(METHOD_ARGS)
    {
        \$invocation = new MethodInvocation(
            'CLASS_NAME', 'METHOD_NAME', func_get_args(), \$this,
            self::\$_reflectionFactory
        );
        try
        {
        	return self::\$_dispatcher-&gt;invoke(\$invocation);
        } catch (Exception \$exception) {
            \$invocation-&gt;setException(\$exception);
        	return self::\$_dispatcher-&gt;invokeException(\$invocation);
        }
	}
TEXT</code><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd>string</dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\Ding\Aspect\Proxy::$proxyTemplate" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/property.png" alt="Property"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">string
                 <span class="highlight">$proxyTemplate</span>= '&lt;&lt;&lt;TEXT

use Ding\Aspect\Interceptor\IDispatcher;
use Ding\Aspect\MethodInvocation;
use Ding\Reflection\IReflectionFactory;

final class NEW_NAME extends CLASS_NAME {
    /**
     * Holds advice dispatcher.
     * @var Dispatcher
     */
    private static \$_dispatcher = false;
	private static \$_reflectionFactory = false;

    /**
	 * Used to recognice proxies along the container.
     * @var boolean
     */
    public static \$iAmADingProxy = true;

    /**
     * Clone this object.
     *
     * @return void
     */
    public function __clone()
    {
        self::\$_dispatcher = clone self::\$_dispatcher;
    }

    /**
     * This is used from the container to set the dispatcher for the aspects.
     *
     * @param IDispatcher \$dispatcher Advice dispatcher.
     *
     * @return void
     */
    public static function setDispatcher(IDispatcher \$dispatcher)
    {
        self::\$_dispatcher = \$dispatcher;
    }

    public static function setReflectionFactory(IReflectionFactory \$reflectionFactory)
    {
    	self::\$_reflectionFactory = \$reflectionFactory;
    }
    METHODS
}
TEXT'
                </code><div class="description">
<p class="short-description">Proxy class template (i.e: the dynamic class)</p></div>
<div class="code-tabs">
<div class="long-description"></div>
<strong>Default value</strong><code>&lt;&lt;&lt;TEXT

use Ding\Aspect\Interceptor\IDispatcher;
use Ding\Aspect\MethodInvocation;
use Ding\Reflection\IReflectionFactory;

final class NEW_NAME extends CLASS_NAME {
    /**
     * Holds advice dispatcher.
     * @var Dispatcher
     */
    private static \$_dispatcher = false;
	private static \$_reflectionFactory = false;

    /**
	 * Used to recognice proxies along the container.
     * @var boolean
     */
    public static \$iAmADingProxy = true;

    /**
     * Clone this object.
     *
     * @return void
     */
    public function __clone()
    {
        self::\$_dispatcher = clone self::\$_dispatcher;
    }

    /**
     * This is used from the container to set the dispatcher for the aspects.
     *
     * @param IDispatcher \$dispatcher Advice dispatcher.
     *
     * @return void
     */
    public static function setDispatcher(IDispatcher \$dispatcher)
    {
        self::\$_dispatcher = \$dispatcher;
    }

    public static function setReflectionFactory(IReflectionFactory \$reflectionFactory)
    {
    	self::\$_reflectionFactory = \$reflectionFactory;
    }
    METHODS
}
TEXT</code><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd>string</dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\Ding\Aspect\Proxy::$reflectionFactory" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/property.png" alt="Property"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">\Ding\Reflection\IReflectionFactory
                 <span class="highlight">$reflectionFactory</span>= ''
                </code><div class="description">
<p class="short-description">A ReflectionFactory implementation</p></div>
<div class="code-tabs">
<div class="long-description"></div>
<strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd><a href="db_Reflection_IReflectionFactory.html#%5CDing%5CReflection%5CIReflectionFactory">\Ding\Reflection\IReflectionFactory</a></dd>
</dl>
</div>
<div class="clear"></div>
</div>
</div>
<h3>Methods</h3>
<div>
<a id="\Ding\Aspect\Proxy::create()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">create</span><span class="nb-faded-text">(
           $class,  $dispatcher
          )
        </span>
        :
          string</code><div class="description"><p class="short_description">This will give you the name of a proxy class as a string. The class will
already exist in the vm.</p></div>
<div class="code-tabs">
<div class="long-description"></div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$class</th>
<td></td>
<td><em></em></td>
</tr>
<tr>
<th>$dispatcher</th>
<td></td>
<td><em></em></td>
</tr>
</table>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>string</td>
<td></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Ding\Aspect\Proxy::createClass()" class="anchor"></a><div class="method protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"><span class="highlight">createClass</span><span class="nb-faded-text">(
          string $newName,  $proxyMethods,  $class
          )
        </span>
        :
          string</code><div class="description"><p class="short_description">This will return a proxy class source.</p></div>
<div class="code-tabs">
<div class="long-description"></div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$newName</th>
<td>string</td>
<td><em><p>Name for the proxy class.</p></em></td>
</tr>
<tr>
<th>$proxyMethods</th>
<td></td>
<td><em></em></td>
</tr>
<tr>
<th>$class</th>
<td></td>
<td><em></em></td>
</tr>
</table>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>string</td>
<td></td>
</tr>
</table>
<strong>Details</strong><dl class="function-info">
<dt>See</dt>
<dd>
<a href="db_Aspect_Proxy.html#%5CDing%5CAspect%5CProxy::%24proxyTemplate">\Ding\Aspect\Proxy::$proxyTemplate</a>
         
    </dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\Ding\Aspect\Proxy::createMethod()" class="anchor"></a><div class="method protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"><span class="highlight">createMethod</span><span class="nb-faded-text">(
          <a href="http://php.net/manual/en/class.reflectionmethod.php">\ReflectionMethod</a> $method
          )
        </span>
        :
          string</code><div class="description"><p class="short_description">This will return a full proxy-method source.</p></div>
<div class="code-tabs">
<div class="long-description"></div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$method</th>
<td><a href="http://php.net/manual/en/class.reflectionmethod.php">\ReflectionMethod</a></td>
<td><em><p>The method to be proxied.</p></em></td>
</tr>
</table>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>string</td>
<td></td>
</tr>
</table>
<strong>Details</strong><dl class="function-info">
<dt>See</dt>
<dd>
<a href="db_Aspect_Proxy.html#%5CDing%5CAspect%5CProxy::%24methodTemplate">\Ding\Aspect\Proxy::$methodTemplate</a>
         
    </dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\Ding\Aspect\Proxy::createParameter()" class="anchor"></a><div class="method protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"><span class="highlight">createParameter</span><span class="nb-faded-text">(
          <a href="http://php.net/manual/en/class.reflectionparameter.php">\ReflectionParameter</a> $parameter
          )
        </span>
        :
          string</code><div class="description"><p class="short_description">This will return a full proxy-method-parameter source.</p></div>
<div class="code-tabs">
<div class="long-description"></div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$parameter</th>
<td><a href="http://php.net/manual/en/class.reflectionparameter.php">\ReflectionParameter</a></td>
<td><em><p>The method parameter.</p></em></td>
</tr>
</table>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>string</td>
<td></td>
</tr>
</table>
<strong>Details</strong><dl class="function-info">
<dt>See</dt>
<dd>
<a href="db_Aspect_Proxy.html#%5CDing%5CAspect%5CProxy::%24methodTemplate">\Ding\Aspect\Proxy::$methodTemplate</a>
         
    </dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\Ding\Aspect\Proxy::setCache()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">setCache</span><span class="nb-faded-text">(
          <a href="db_Cache_ICache.html#%5CDing%5CCache%5CICache">\Ding\Cache\ICache</a> $cache
          )
        </span>
        :
          void</code><div class="description"><p class="short_description">Sets Proxy cache to use.</p></div>
<div class="code-tabs">
<div class="long-description"></div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$cache</th>
<td><a href="db_Cache_ICache.html#%5CDing%5CCache%5CICache">\Ding\Cache\ICache</a></td>
<td><em></em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Ding\Aspect\Proxy::setReflectionFactory()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">setReflectionFactory</span><span class="nb-faded-text">(
           $reflectionFactory
          )
        </span>
        :
          void</code><div class="description"><p class="short_description">(non-PHPdoc)</p></div>
<div class="code-tabs">
<div class="long-description"></div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$reflectionFactory</th>
<td></td>
<td><em></em></td>
</tr>
</table>
<strong>Details</strong><dl class="function-info">
<dt>See</dt>
<dd>\Ding\Reflection.IReflectionFactoryAware::setReflectionFactory()
         
    </dd>
</dl>
</div>
<div class="clear"></div>
</div>
</div>
</div>
</div>
<small xmlns="" class="footer">Documentation was generated by <a href="http://docblox-project.org">DocBlox 0.17.1</a>.
    </small></body></html>
